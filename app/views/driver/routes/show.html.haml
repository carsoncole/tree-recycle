.container-fluid
  #driver-route

    %h1
      = @route.name_with_zone
      .map-icon
        = link_to driver_reservations_map_path(route_id: @route.id) do
          %i.fa-solid.fa-map
    .table-responsive
      %table.table.table-striped.driver-routes
        %thead
          %tr
            %th.buttons  Status
            %th.street Address

            %th.notes Notes
            %th.name Name
            %th.phone Phone
        %tbody
          - @reservations.each do |reservation|
            %tr{class: reservation.picked_up? ? 'table-primary' : reservation.missing? ? 'table-danger' : nil}
              / %td.buttons-orig
              /   = button_to "Picked Up", [:driver, reservation], id: reservation.picked_up? ? "btn-not-picked-up-#{reservation.id}" : "btn-picked-up-#{reservation.id}", class: "btn picked-up btn-outline-primary #{ reservation.picked_up? ? 'active' : nil}",  params: { status: 'picked_up' }, data: { turbo_confirm: 'Picked up? Are you sure?' }
              /   = button_to "Missing", [:driver, reservation], id: reservation.missing? ? "btn-not-missing-#{reservation.id}" : "btn-missing-#{reservation.id}", class: "btn missing btn-outline-danger #{ reservation.missing? ? 'active' : nil }",  params: { status: 'missing' }, data: { turbo_confirm: 'Missing? Are you sure?' }
              /   = button_to "Pending Pickup", [:driver, reservation], id: reservation.pending_pickup? ? "btn-not-pending-pickup-#{reservation.id}" : "btn-pending-pickup-#{reservation.id}", class: "btn pending-pickup btn-outline-success #{ reservation.pending_pickup? ? 'active' : nil }",  params: { status: 'pending_pickup' }, data: { turbo_confirm: 'Reseting to PENDING PICKUP. This will send a notification. Are you sure?' }
              %td.buttons
                .btn-group(role="group")
                  = link_to "Pending pickup", [:driver, reservation, status: 'pending_pickup'], type: 'button', id: reservation.pending_pickup? ? "btn-not-pending-pickup-#{reservation.id}" : "btn-pending-pickup-#{reservation.id}", class: "btn pending-pickup btn-primary #{ reservation.pending_pickup? ? 'active' : nil }",  data: { turbo_method: :patch, turbo_confirm: 'Are you sure? Setting to Pending and will send a notification to the resident.' }
                  = link_to "Picked up", [:driver, reservation, status: 'picked_up'], type: 'button', id: reservation.picked_up? ? "btn-not-picked-up-#{reservation.id}" : "btn-picked-up-#{reservation.id}",  class: "btn picked-up btn-primary #{ reservation.picked_up? ? 'active' : nil}",  data: { turbo_method: :patch, turbo_confirm: 'Picked up? Are you sure?' }
                  = link_to "Missing", [:driver, reservation, status: 'missing'], type: 'button', id: reservation.missing? ? "btn-not-missing-#{reservation.id}" : "btn-missing-#{reservation.id}", class: "btn missing btn-primary #{ reservation.missing? ? 'active' : nil }",  data: { turbo_method: :patch, turbo_confirm: 'Missing? Are you sure?' }
              %td.street= link_to reservation.street, driver_reservation_path(reservation)

              %td.notes= reservation.notes
              %td.name= reservation.name
              %td.phone= reservation.phone
