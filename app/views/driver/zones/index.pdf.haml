!!!

%html
  %head
    %meta(charset='utf-8')
    = wicked_pdf_stylesheet_link_tag "pdf"
    %link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css")

  %body
    - @zones.each do |zone|
      .driver-route.pdf
        - zone.routes.each do |route|
          - next if route.reservations.pending.empty?

          / .zone-leaders
          /   %span.Zone Leaders:
          /   - zone.drivers.leader.each do |l|
          /     = l.name
          /     - if l.phone.present?
          /       = surround("(",")") do
          /         = l.phone


          .table-responsive
            %table.table.driver-routes
              %thead

                .header
                  .zone= zone.name
                  .route= route.name
                  .drivers= route.drivers.map{|d| d.name + ' (' + d.phone + ')' }.join(", ")
                %tr
                  %th.buttons
                  %th Address

                  %th.notes Notes
                  %th Donation
                  %th.name Name/Phone
              %tbody
                - route.reservations.pending.each do |reservation|
                  %tr
                    %td.buttons
                      - if reservation.picked_up?
                        .selection
                          %i.bi.bi-check-square
                          .status Picked Up
                      - else
                        .selection
                          %i.bi.bi-square
                          .status Picked Up
                      .selection
                        %i.bi.bi-square
                        .status Missing
                    %td.street= reservation.street

                    %td.notes.smaller= reservation.notes
                    %td.donation
                      - if reservation.online_donation?
                        .selection
                          %i.bi.bi-check-square
                          .status Online
                      - else 
                        - if reservation.cash_or_check_donation?
                          .selection
                            %i.bi.bi-check-square
                            .status Cash/Check $______
                        - else
                          .selection
                            %i.bi.bi-square
                            .status Cash/Check $______
                        .selection
                          %i.bi.bi-square.clear
                          .status Door hanger


                    %td.name.smaller
                      = reservation.name
                      %br
                      = reservation.phone