%h1
  Reservations
  - if params[:zone_id]
    \-
    = Zone.find(params[:zone_id]).name


= render 'search'

%p.mb-4
  = link_to "All", admin_reservations_path
  - Zone.all.each do |zone|
    = '|'
    = link_to zone.name, admin_reservations_path(zone_id: zone.id)
  = '|'
  = link_to "Uncompleted", admin_reservations_path(uncompleted: true)


%table.table.reservations
  %thead
    %tr
      %th Name
      %th Street
      %th Zone
      %th


  %tbody
    - @reservations.each do |reservation|
      %tr
        %td= link_to reservation.name, admin_reservation_path(reservation)
        %td
          = link_to reservation.street, "https://maps.apple.com/?q=#{reservation.latitude},#{reservation.longitude}", target: '_blank'
          = link_to "https://www.google.com/maps/place/#{reservation.latitude},#{reservation.longitude}", target: '_blank' do
            %i.fa-brands.fa-google


        %td
          - if reservation.zone_id?
            = link_to admin_reservations_path(zone_id: reservation.zone_id) do
              = reservation&.zone&.name
              = surround("(", ")") do
                = pluralize(reservation.distance_to_zone.round(2), "mile")

        %td.actions
          = link_to admin_reservation_path(reservation) do
            %i.fa-solid.fa-eye.icon
          = link_to edit_admin_reservation_path(reservation) do
            %i.fa-solid.fa-pen.icon
          = link_to reservation, method: :delete, data: { "turbo-method": :delete, confirm: 'Are you sure?' } do
            %i.fa-solid.fa-trash.icon
          = link_to admin_reservation_process_zone_path(reservation), method: :post, data: { "turbo-method": :post } do
            %i.fa-solid.fa-bolt.icon


%br
= pagy_bootstrap_nav(@pagy).html_safe
